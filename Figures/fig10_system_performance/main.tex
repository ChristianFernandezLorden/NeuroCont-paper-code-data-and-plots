\documentclass[tikz,border=0pt]{standalone}
\renewcommand{\familydefault}{\sfdefault}
\usepackage{pgfplots}
\usetikzlibrary{plotmarks}
\pgfplotsset{compat=newest}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{graphicx}


\input{../pgfplots_style_setup.tex}

\usepackage{ULiege-colors}
\usepackage{Nature-colors}

\begin{document}
    \colorlet{colorLineError}{natureSkyBlue}
    \colorlet{colorLAreaError}{natureSkyBlue!25}
    \colorlet{colorDotError}{natureSkyBlue}
    \colorlet{colorLineParam}{natureBluishGreen}
    \colorlet{colorLAreaParam}{natureBluishGreen!25}
    \colorlet{colorDotParam}{natureBluishGreen}
    \colorlet{axisColor}{black!20}
    \colorlet{plotGreyColor}{black!60}
    \colorlet{textGreyColor}{black!60}
    
\begin{tikzpicture}[
        title style/.style = {
            font=\bfseries, 
            fill=ulgGrey!25, 
            text width=2cm, 
            align=center
        },
    ]
    \newcommand{\probplot}[5]{%
    % Line plot
    \addplot [color=#3,name path=mean,forget plot] 
    table [col sep=comma, x=prob, y=median] 
    {#1};
    % Area plot
    \addplot [draw=none,name path=top,forget plot] 
    table [col sep=comma, x=prob,y=perc25] 
    {#1};
    \addplot [draw=none,name path=bot,forget plot] 
    table [col sep=comma, x=prob,y=perc75] 
    {#1};
    \addplot[color=#4,forget plot] fill between[of=top and bot];
    % Points plot
    \addplot[only marks, mark=-, very thin,color=#5,mark size=0.4pt,forget plot,on layer=axis foreground] table [col sep=comma, x=prob, y=val] {#2};
    %\addplot[only marks,color=#5,mark size=0.2pt,forget plot,on layer=axis foreground] table [col sep=comma, x=prob, y=val] {#2};
    }

    \pgfmathsetlengthmacro{\plotheight}{1.25cm}
    \pgfmathsetlengthmacro{\plotwidth}{3.1cm}
    \pgfmathsetlengthmacro{\plotXsep}{1.15cm}
    \pgfmathsetlengthmacro{\plotYsep}{0.15cm}
    \pgfmathsetlengthmacro{\groupplotYsep}{1.8cm}
    \pgfmathsetlengthmacro{\labelXoff}{0.2cm}
    \pgfmathsetlengthmacro{\labelYoff}{0.2cm}
    \pgfmathsetlengthmacro{\titleYoff}{0.1cm}

    
    \newcommand{\xminMis}{0}\newcommand{\xmaxMis}{0.15}

    \newcommand{\ampMin}{0.005}\newcommand{\ampMax}{2}
    \newcommand{\ampMinText}{\num{5e-3}}\newcommand{\ampMaxText}{\num{2e0}}

    \newcommand{\freqMin}{0.005}\newcommand{\freqMax}{0.5}
    \newcommand{\freqMinText}{\num{5e-3}}\newcommand{\freqMaxText}{\num{5e-1}}

    \newcommand{\gsynMin}{-5}\newcommand{\gsynMax}{-1}
    
    \newcommand{\gsmMin}{1.5}\newcommand{\gsmMax}{5}

    \pgfplotsset{
        every axis/.append style={scale only axis},
        detached axis=0.35cm,
        axis line style={axisColor},
        tick style={axisColor},
        tick label style={text=textGreyColor},
    }

    \pgfplotsset{
        xmin=0.21,xmax=0.86,
    }

    \begin{axis}[
            width=\plotwidth,
            height=\plotheight,
            ylabel = {$e_\text{amp}$},
            %y unit = \unit{\radian},
            hide x axis,
            ymode=log,
            two ticks y axis={\ampMin}{\ampMax},
            two ticks y axis labels={\ampMinText}{\ampMaxText},
            name=top plot,
        ]
        \probplot{data/plant_variability_pendulum_length_amp_error_avg.csv}{data/plant_variability_pendulum_length_amp_error_pts.csv}{colorLineError}{colorLAreaError}{colorDotError}
        \coordinate (A_label) at (yticklabel* cs:1);
    \end{axis}
    \coordinate (A_title) at (top plot.north);
    \begin{axis}[
            width=\plotwidth,
            height=\plotheight,
            ylabel = {$e_\text{sync}$},
            %y unit = \unit{\second},
            hide x axis,
            ymode=log,
            two ticks y axis={\freqMin}{\freqMax},
            two ticks y axis labels={\freqMinText}{\freqMaxText},
            at={($(top plot.south west) + (0,-\plotYsep)$)},
            anchor=north west,
            name=prev plot,
        ]
        \probplot{data/plant_variability_pendulum_length_freq_error_avg.csv}{data/plant_variability_pendulum_length_freq_error_pts.csv}{colorLineError}{colorLAreaError}{colorDotError}
    \end{axis}
    \begin{axis}[
            width=\plotwidth,
            height=\plotheight,
            ylabel = {$g_\text{syn}$},
            %y unit = -,
            hide x axis,
            two ticks y axis={\gsynMin}{\gsynMax},
            at={($(prev plot.south west) + (0,-\plotYsep)$)},
            anchor=north west,
            name=prev plot,
        ]
        \probplot{data/plant_variability_pendulum_length_gsyn_avg.csv}{data/plant_variability_pendulum_length_gsyn_pts.csv}{colorLineParam}{colorLAreaParam}{colorDotParam}
    \end{axis}
    \begin{axis}[
            width=\plotwidth,
            height=\plotheight,
            ylabel = {$g_\text{s-}$},
            %y unit = -,
            two ticks y axis={\gsmMin}{\gsmMax},
            %x unit = \unit{\meter},
            xlabel = {$l$},
            two ticks x axis={0.21}{0.86},
            at={($(prev plot.south west) + (0,-\plotYsep)$)},
            anchor=north west,
            name=all last plot,
        ]
        \probplot{data/plant_variability_pendulum_length_gsm_avg.csv}{data/plant_variability_pendulum_length_gsm_pts.csv}{colorLineParam}{colorLAreaParam}{colorDotParam}
    \end{axis}


    \pgfplotsset{
        xmin=0.248,xmax=1,
    }

    \begin{axis}[
            width=\plotwidth,
            height=\plotheight,
            ylabel = {$e_\text{amp}$},
            %y unit = \unit{\radian},
            hide x axis,
            ymode=log,
            two ticks y axis={\ampMin}{\ampMax},
            two ticks y axis labels={\ampMinText}{\ampMaxText},
            middle y axis style,
            at={($(top plot.south east) + (\plotXsep,0)$)},
            name=top plot,
            legend columns=2,
            legend cell align=left,
            legend style={draw=none,fill=none,font=\scriptsize,row sep=-0.12cm,/tikz/every even column/.append style={column sep=-0.1cm},
            at={(0.0,1)}, anchor=north west,yshift=0.1cm,inner xsep=0pt, inner ysep=0pt},
            legend pos=north west,
        ]
        \probplot{data/plant_variability_mass_density_amp_error_avg.csv}{data/plant_variability_mass_density_amp_error_pts.csv}{colorLineError}{colorLAreaError}{colorDotError}
        
        %\addlegendimage{custom circle legend={fill=colorDotError,draw=none}};
        %\addlegendentry{}
        %\addlegendimage{custom circle legend={fill=colorDotParam,draw=none}};

        \addlegendimage{custom line mark legend={draw=colorDotError,thin}};
        \addlegendentry{}
        \addlegendimage{custom line mark legend={draw=colorDotParam,thin}};
        
        \addlegendentry{Individual sim}
    
        \addlegendimage{custom line legend={draw=colorLineError,very thick}}
        \addlegendentry{}
        \addlegendimage{custom line legend={draw=colorLineParam,very thick}}
        \addlegendentry{Median value}

        \addlegendimage{custom area legend={fill=colorLAreaError,draw=none}}
        \addlegendentry{}
        \addlegendimage{custom area legend={fill=colorLAreaParam,draw=none}}
        %\addlegendentry{50\% interval}
        \addlegendentry{1\textsuperscript{st}-3\textsuperscript{rd} quartiles}

        \coordinate (B_label)at (yticklabel* cs:1);
    \end{axis}
    \coordinate (B_title) at (top plot.north);
    \begin{axis}[
            width=\plotwidth,
            height=\plotheight,
            ylabel = {$e_\text{sync}$},
            %y unit = \unit{\second},
            hide x axis,
            ymode=log,
            two ticks y axis={\freqMin}{\freqMax},
            two ticks y axis labels={\freqMinText}{\freqMaxText},
            middle y axis style,
            at={($(top plot.south west) + (0,-\plotYsep)$)},
            anchor=north west,
            name=prev plot,
        ]
        \probplot{data/plant_variability_mass_density_freq_error_avg.csv}{data/plant_variability_mass_density_freq_error_pts.csv}{colorLineError}{colorLAreaError}{colorDotError}
    \end{axis}
    \begin{axis}[
            width=\plotwidth,
            height=\plotheight,
            ylabel = {$g_\text{syn}$},
            %y unit = -,
            hide x axis,
            two ticks y axis={\gsynMin}{\gsynMax},
            middle y axis style,
            at={($(prev plot.south west) + (0,-\plotYsep)$)},
            anchor=north west,
            name=prev plot,
        ]
        \probplot{data/plant_variability_mass_density_gsyn_avg.csv}{data/plant_variability_mass_density_gsyn_pts.csv}{colorLineParam}{colorLAreaParam}{colorDotParam}
    \end{axis}
    \begin{axis}[
            width=\plotwidth,
            height=\plotheight,
            ylabel = {$g_\text{s-}$},
            %y unit = -,
            two ticks y axis={\gsmMin}{\gsmMax},
            middle y axis style,
            xlabel = {$m$},
            %x unit = \unit{\kilogram},
            two ticks x axis={0.248}{1},
            at={($(prev plot.south west) + (0,-\plotYsep)$)},
            anchor=north west,
            name=prev plot,
        ]
        \probplot{data/plant_variability_mass_density_gsm_avg.csv}{data/plant_variability_mass_density_gsm_pts.csv}{colorLineParam}{colorLAreaParam}{colorDotParam}
    \end{axis}

    
    \pgfplotsset{
        xmin=0.014,xmax=0.058,
        %xmin=0.0,xmax=2,
    }

    \begin{axis}[
            width=\plotwidth,
            height=\plotheight,
            ylabel = {$e_\text{amp}$},
            %y unit = \unit{\radian},
            hide x axis,
            ymode=log,
            two ticks y axis={\ampMin}{\ampMax},
            two ticks y axis labels={\ampMinText}{\ampMaxText},
            middle y axis style,
            at={($(top plot.south east) + (\plotXsep,0)$)},
            name=top plot,
        ]
        \probplot{data/plant_variability_friction_factor_amp_error_avg.csv}{data/plant_variability_friction_factor_amp_error_pts.csv}{colorLineError}{colorLAreaError}{colorDotError}
        \coordinate (C_label)at (yticklabel* cs:1);
    \end{axis}
    \coordinate (C_title) at (top plot.north);
    \begin{axis}[
            width=\plotwidth,
            height=\plotheight,
            ylabel = {$e_\text{sync}$},
            %y unit = \unit{\second},
            hide x axis,
            ymode=log,
            two ticks y axis={\freqMin}{\freqMax},
            two ticks y axis labels={\freqMinText}{\freqMaxText},
            middle y axis style,
            at={($(top plot.south west) + (0,-\plotYsep)$)},
            anchor=north west,
            name=prev plot, 
        ]
        \probplot{data/plant_variability_friction_factor_freq_error_avg.csv}{data/plant_variability_friction_factor_freq_error_pts.csv}{colorLineError}{colorLAreaError}{colorDotError}
    \end{axis}
    \begin{axis}[
            width=\plotwidth,
            height=\plotheight,
            ylabel = {$g_\text{syn}$},
            %y unit = -,
            hide x axis,
            two ticks y axis={\gsynMin}{\gsynMax},
            middle y axis style,
            at={($(prev plot.south west) + (0,-\plotYsep)$)},
            anchor=north west,
            name=prev plot,
        ]
        \probplot{data/plant_variability_friction_factor_gsyn_avg.csv}{data/plant_variability_friction_factor_gsyn_pts.csv}{colorLineParam}{colorLAreaParam}{colorDotParam}
    \end{axis}
    \begin{axis}[
            width=\plotwidth,
            height=\plotheight,
            ylabel = {$g_\text{s-}$},
            %y unit = -,
            two ticks y axis={\gsmMin}{\gsmMax},
            scaled x ticks=false,
            xticklabel style={
                    /pgf/number format/fixed,
                    /pgf/number format/precision=5
            },
            middle y axis style,
            xlabel={$\lambda$},
            %x unit = \unit{\newton\meter\second\per\radian},
            two ticks x axis={0.014}{0.058},
            at={($(prev plot.south west) + (0,-\plotYsep)$)},
            anchor=north west,
            name=prev plot,
        ]
        \probplot{data/plant_variability_friction_factor_gsm_avg.csv}{data/plant_variability_friction_factor_gsm_pts.csv}{colorLineParam}{colorLAreaParam}{colorDotParam}
    \end{axis}




    \node[font=\Large\bfseries, shift={(\labelXoff,\labelYoff)}, anchor=south east, text=textGreyColor] at (A_label) {A};
    \node[font=\Large\bfseries, shift={(\labelXoff,\labelYoff)}, anchor=south east, text=textGreyColor] at (B_label) {B};
    \node[font=\Large\bfseries, shift={(\labelXoff,\labelYoff)}, anchor=south east, text=textGreyColor] at (C_label) {C};
    %\node[font=\LARGE\bfseries, above] at (A_label) {A};
    %\node[font=\LARGE\bfseries, above left] at (A_label-|B_label) {B};

    \node[title style, yshift=\titleYoff, anchor=south] at (A_title) {Length};
    \node[title style, yshift=\titleYoff, anchor=south] at (B_title) {Mass};
    \node[title style, yshift=\titleYoff, anchor=south] at (C_title) {Friction};

    \coordinate (top_left_bb) at (current bounding box.north west);
    \coordinate (bot_left_bb) at (current bounding box.south west);
    \coordinate (top_right_bb) at ([xshift=372pt]top_left_bb);
    \coordinate (bot_right_bb) at ([xshift=372pt]bot_left_bb);

    %\draw[red] (current bounding box.north west) --(current bounding box.south west) -- (current bounding box.south east) -- (current bounding box.north east) -- cycle;
    %\draw (top_left_bb) --(bot_left_bb) -- (bot_right_bb) -- (top_right_bb) -- cycle;
\end{tikzpicture}

\end{document}